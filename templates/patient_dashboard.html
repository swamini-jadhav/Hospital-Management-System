<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Patient Dashboard</title>
    <link rel="stylesheet" href="..\static\style.css">
    <link rel="icon" href="https://www.pngguru.in/storage/uploads/images/Medical%20icon%20png%20images%20%7C%20free%20images%20of%20medical%20icon%20vector_1651505897_729086707.webp">
</head>
<body>
    <header>
        <nav>
        <div class="logo">
            <h2>Logo</h2>
        </div>
        <div class="nav-icons">
            <ul>
            <li>Dashboard <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" color="currentColor" fill="none">
                <path d="M12.8924 2.80982L21.4876 9.59547C21.8112 9.85095 22 10.2405 22 10.6528C22 11.3969 21.3969 12 20.6528 12H20V15.5C20 18.3284 20 19.7426 19.1213 20.6213C18.2426 21.5 16.8284 21.5 14 21.5H10C7.17157 21.5 5.75736 21.5 4.87868 20.6213C4 19.7426 4 18.3284 4 15.5V12H3.34716C2.60315 12 2 11.3969 2 10.6528C2 10.2405 2.1888 9.85095 2.5124 9.59547L11.1076 2.80982C11.3617 2.60915 11.6761 2.5 12 2.5C12.3239 2.5 12.6383 2.60915 12.8924 2.80982Z" stroke="#141B34" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M14.5 21.5V17C14.5 16.0654 14.5 15.5981 14.299 15.25C14.1674 15.022 13.978 14.8326 13.75 14.701C13.4019 14.5 12.9346 14.5 12 14.5C11.0654 14.5 10.5981 14.5 10.25 14.701C10.022 14.8326 9.83261 15.022 9.70096 15.25C9.5 15.5981 9.5 16.0654 9.5 17V21.5" stroke="#141B34" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg></li>
            <li>Contact <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18s" height="18" color="currentColor" fill="none">
                <path d="M4.91186 10.5413L7.55229 7.90088C8.09091 7.36227 8.27728 6.56642 8.05944 5.83652C7.8891 5.26577 7.69718 4.57964 7.56961 3.99292C7.45162 3.45027 6.97545 3 6.42012 3H4.91186C3.8012 3 2.88911 3.90384 3.01094 5.0078C3.93709 13.3996 10.6004 20.0629 18.9922 20.9891C20.0962 21.1109 21 20.1988 21 19.0881V17.5799C21 17.0246 20.5479 16.569 20.0015 16.4696C19.3988 16.36 18.7611 16.1804 18.2276 16.0103C17.4611 15.7659 16.6091 15.9377 16.0403 16.5065L13.4587 19.0881" stroke="#141B34" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg></li>
            </ul>
        </div>
        </nav>
    </header>
    <main>
        <div id="pageC">
            <div class="container">
                <div class="title">
                    <h3>Welcome {{ patient.FirstName }},</h3>
                    <div id="links">
                        <a href="{{ url_for('login') }}"><button class="logout">LOGOUT</button></a>
                        
                        <a href="{{ url_for('view_patient_history', patient_id=patient.PatientID) }}">
                            <button class="history">HISTORY</button>
                        </a>
                    </div>
                </div>
                <div class="content">
                    <h3>Departments</h3>
                    <div class="departments">
                        <ol class="custom-steps">
                        {% for dept in departments %}
                            <a href="{{ url_for('view_department', dept_name=dept.Department_name, patient_id=patient.PatientID) }}"><li class="content1">{{ dept.Department_name }}</li></a>
                        {% else %}
                            <p>No departments available</p>
                        {% endfor %}
                        </ol>
                    </div>
                    <div class="appointments">
                        <h3>UPCOMING APPOINTMENTS</h3>
                        <table class="appointments-table">
                            <thead>
                                <tr>
                                    <th>Sr No.</th>
                                    <th>Doctor Name</th>
                                    <th>Dept</th>
                                    <th>Date</th>
                                    <th>Time</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for appt in appointments %}
                                <tr>
                                    <td data-label="Sr No.">{{ loop.index }}</td>   <!-- FIXED -->
                                    <td data-label="Doctor Name">{{ appt.doctor.FirstName }}</td>
                                    <td data-label="Dept">{{ appt.doctor.Department }}</td>
                                    <td data-label="Date">{{ appt.Date }}</td>
                                    <td data-label="Time">{{ appt.Time }}</td>
                                    <td data-label="Action">
                                        <a href="{{ url_for('cancel_appointment', appt_id=appt.AppointmentID) }}" class="action-cancel">Cancel</a>
                                    </td>
                                </tr>
                            {% else %}
                                <tr><td colspan="6">No appointments scheduled</td></tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>
</html>